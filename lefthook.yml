---
pre-commit:
  parallel: true
  jobs:
    - name: lefthook
      glob: lefthook.yml
      run: uvx lefthook validate

    - name: tombi
      glob: '*.toml'
      run: >
        uvx tombi format {staged_files} &&
        uvx tombi lint {staged_files}
      stage_fixed: true

    - name: actionlint
      glob: '.github/workflows/*.{yml,yaml}'
      run: uvx --from actionlint-py actionlint {staged_files}

    - name: zizmor
      glob: '.github/workflows/*.{yml,yaml}'
      run: uvx zizmor {staged_files}

    - name: ruff
      glob: '*.{py,pyi}'
      run: >
        uvx ruff format {staged_files} &&
        uvx ruff check --fix {staged_files}
      stage_fixed: true

    - name: pyright
      glob: 'yt_dlp_plugins/**/*.py'
      run: uvx pyright {staged_files}

colors: false
no_tty: true
